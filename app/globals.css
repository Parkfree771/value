@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Galmuri11 픽셀 폰트 (CDN)
   ============================================ */
@font-face {
  font-family: 'Galmuri11';
  src: url('https://cdn.jsdelivr.net/npm/galmuri/dist/Galmuri11.woff2') format('woff2');
  font-weight: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Galmuri11';
  src: url('https://cdn.jsdelivr.net/npm/galmuri/dist/Galmuri11-Bold.woff2') format('woff2');
  font-weight: bold;
  font-display: swap;
}

/* ============================================
   Base Layer
   ============================================ */
@layer base {
  * {
    -webkit-tap-highlight-color: transparent;
  }

  /* 픽셀 아트 이미지 렌더링 - 흐릿해지지 않도록 */
  img, canvas {
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    content-visibility: auto;
  }

  html {
    scroll-behavior: smooth;
  }

  .contain-layout {
    contain: layout;
  }

  .contain-paint {
    contain: paint;
  }

  .contain-strict {
    contain: strict;
  }

  .gpu-accelerated {
    will-change: transform;
    transform: translateZ(0);
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }

    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    .blur-sm,
    .blur-md,
    .blur-lg,
    .blur-xl,
    .blur-2xl {
      filter: none !important;
    }
  }

  @media (prefers-reduced-motion: reduce), (update: slow) {
    .animate-pulse,
    .animate-spin,
    .animate-bounce {
      animation: none !important;
    }
  }
}

/* ============================================
   디자인 토큰 (Design Tokens) - 레트로 픽셀 테마
   ============================================ */

:root {
  --background: #f5f5f5;
  --foreground: #171717;

  /* 브랜드 컬러 */
  --brand-primary: #DC2626;
  --brand-secondary: #F5A623;

  /* 픽셀 테마 색상 */
  --pixel-bg: #eeeeee;
  --pixel-bg-card: #ffffff;
  --pixel-border: #DC2626;
  --pixel-border-muted: #d1d5db;
  --pixel-accent: #DC2626;
  --pixel-accent-dark: #991b1b;
  --pixel-gold: #F5A623;

  /* 상태 색상 */
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-error: #ef4444;
  --color-info: #DC2626;

  /* 투자 의견 색상 */
  --color-buy: #ef4444;
  --color-sell: #3b82f6;
  --color-hold: #6b7280;

  /* 픽셀 그림자 - 블러 없는 하드 그림자 */
  --shadow-sm: 2px 2px 0px #000000;
  --shadow-md: 3px 3px 0px #000000;
  --shadow-lg: 4px 4px 0px #000000;
  --shadow-xl: 6px 6px 0px #000000;

  /* 간격 */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
}

.dark {
  --background: #0a0a1a;
  --foreground: #e0e0e0;

  --pixel-bg: #16213e;
  --pixel-bg-card: #0f3460;
  --pixel-border: #e94560;
  --pixel-border-muted: #533483;
  --pixel-accent: #e94560;
  --pixel-accent-dark: #a32d42;

  --shadow-sm: 2px 2px 0px #000000;
  --shadow-md: 3px 3px 0px #000000;
  --shadow-lg: 4px 4px 0px #000000;
  --shadow-xl: 6px 6px 0px #000000;
}

/* ============================================
   기본 HTML/Body 설정
   ============================================ */

html {
  -webkit-text-size-adjust: 100%;
  font-size: 16px;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: 'Inter', Arial, Helvetica, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
}

/* ============================================
   모바일 최적화
   ============================================ */

@media (hover: none) and (pointer: coarse) {
  button:not(.btn-sm):not(.text-xs):not(.text-sm),
  a:not(.text-xs):not(.text-sm) {
    min-height: 44px;
  }
}

/* 레트로 스크롤바 */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: var(--pixel-bg);
  border: 2px solid var(--pixel-border-muted);
}

::-webkit-scrollbar-thumb {
  background: var(--pixel-accent);
  border: 2px solid var(--pixel-border);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--brand-primary);
}

/* ============================================
   유틸리티 클래스
   ============================================ */
@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* 픽셀 테두리 유틸리티 */
  .pixel-border {
    border: 3px solid var(--pixel-border);
    box-shadow: var(--shadow-md);
  }

  /* 네온 글로우 텍스트 */
  .text-glow-red {
    text-shadow: 0 0 10px rgba(220, 38, 38, 0.6), 0 0 20px rgba(220, 38, 38, 0.3);
  }

  .text-glow-blue {
    text-shadow: 0 0 10px rgba(59, 130, 246, 0.6), 0 0 20px rgba(59, 130, 246, 0.3);
  }

  .text-glow-green {
    text-shadow: 0 0 10px rgba(0, 255, 136, 0.6), 0 0 20px rgba(0, 255, 136, 0.3);
  }

  /* 픽셀 텍스트 그림자 */
  .text-shadow-pixel {
    text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.5);
  }
}

/* ============================================
   공통 컴포넌트 클래스 - 픽셀아트 테마
   ============================================ */
@layer components {
  /* 브랜드 타이틀 - 그라데이션 + 샤인 효과 */
  .brand-title {
    font-weight: 900;
    letter-spacing: -0.03em;
    background: linear-gradient(
      110deg,
      #DC2626 0%,
      #B91C1C 25%,
      #1a1a1a 50%,
      #B91C1C 75%,
      #DC2626 100%
    );
    background-size: 250% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: brandShine 5s ease-in-out infinite alternate;
  }

  .dark .brand-title {
    background: linear-gradient(
      110deg,
      #EF4444 0%,
      #DC2626 25%,
      #e0e0e0 50%,
      #DC2626 75%,
      #EF4444 100%
    );
    background-size: 250% 100%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: brandShine 5s ease-in-out infinite alternate;
  }

  /* 카드 스타일 - 각진 픽셀 테두리 + 하드 그림자 */
  .card-base {
    background: var(--pixel-bg-card);
    border: 3px solid var(--pixel-border-muted);
    box-shadow: var(--shadow-md);
    @apply transition-all duration-200;
  }

  .card-interactive {
    background: var(--pixel-bg-card);
    border: 3px solid var(--pixel-border-muted);
    box-shadow: var(--shadow-md);
    @apply cursor-pointer transition-all duration-200;
  }
  .card-interactive:hover {
    border-color: var(--pixel-accent);
    box-shadow: 0 0 12px rgba(233, 69, 96, 0.5), 0 0 24px rgba(233, 69, 96, 0.2);
    transform: translate(-2px, -2px);
  }

  /* 버튼 스타일 - 8bit 눌림 효과 */
  .btn-primary {
    @apply px-4 py-2 text-white font-bold;
    background: var(--brand-primary);
    border: 3px solid var(--pixel-accent-dark);
    box-shadow: 4px 4px 0px var(--pixel-accent-dark);
    transition: all 0.1s ease;
  }
  .btn-primary:hover {
    transform: translate(1px, 1px);
    box-shadow: 3px 3px 0px var(--pixel-accent-dark);
  }
  .btn-primary:active {
    transform: translate(4px, 4px);
    box-shadow: 0px 0px 0px var(--pixel-accent-dark);
  }

  .btn-secondary {
    @apply px-4 py-2 font-bold;
    background: var(--pixel-bg);
    color: var(--foreground);
    border: 3px solid var(--pixel-border-muted);
    box-shadow: 4px 4px 0px rgba(0, 0, 0, 0.5);
    transition: all 0.1s ease;
  }
  .btn-secondary:hover {
    border-color: var(--pixel-accent);
    transform: translate(1px, 1px);
    box-shadow: 3px 3px 0px rgba(0, 0, 0, 0.5);
  }
  .btn-secondary:active {
    transform: translate(4px, 4px);
    box-shadow: 0px 0px 0px rgba(0, 0, 0, 0.5);
  }

  /* 배지 스타일 - 각진 테두리 */
  .badge-base {
    @apply px-2 py-1 text-xs font-bold uppercase tracking-wide;
    border: 2px solid;
  }

  .badge-buy {
    @apply badge-base;
    background: rgba(239, 68, 68, 0.15);
    color: #ff6b6b;
    border-color: #ef4444;
  }

  .badge-sell {
    @apply badge-base;
    background: rgba(59, 130, 246, 0.15);
    color: #6baaff;
    border-color: #3b82f6;
  }

  .badge-hold {
    @apply badge-base;
    background: rgba(107, 114, 128, 0.15);
    color: #9ca3af;
    border-color: #6b7280;
  }

  /* 위험 버튼 - 삭제/탈퇴 등 */
  .btn-danger {
    @apply px-4 py-2 font-bold text-sm;
    font-family: 'Galmuri11', monospace;
    background: rgba(220, 38, 38, 0.15);
    color: #dc2626;
    border: 2px solid #dc2626;
    box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.5);
    transition: all 0.1s ease;
  }
  .btn-danger:hover {
    background: #dc2626;
    color: white;
    transform: translate(1px, 1px);
    box-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5);
  }
  .dark .btn-danger {
    background: rgba(239, 68, 68, 0.15);
    color: #f87171;
    border-color: #f87171;
  }
  .dark .btn-danger:hover {
    background: #dc2626;
    color: white;
  }

  /* 픽셀 폼 입력 필드 */
  .pixel-input {
    width: 100%;
    font-family: 'Galmuri11', monospace;
    @apply px-3 py-2 text-sm;
    background: var(--pixel-bg-card);
    color: var(--foreground);
    border: 3px solid var(--pixel-border-muted);
    box-shadow: var(--shadow-sm);
    transition: all 0.1s ease;
  }
  .pixel-input:focus {
    outline: none;
    border-color: var(--pixel-accent);
    box-shadow: 0 0 10px rgba(220, 38, 38, 0.3), var(--shadow-sm);
  }
  .pixel-input:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .pixel-input::placeholder {
    @apply text-gray-500 dark:text-gray-400;
  }

  /* 픽셀 셀렉트 */
  .pixel-select {
    width: 100%;
    font-family: 'Galmuri11', monospace;
    @apply px-3 py-2 text-sm;
    background: var(--pixel-bg-card);
    color: var(--foreground);
    border: 3px solid var(--pixel-border-muted);
    box-shadow: var(--shadow-sm);
    transition: all 0.1s ease;
  }
  .pixel-select:focus {
    outline: none;
    border-color: var(--pixel-accent);
  }

  /* 픽셀 라벨 */
  .pixel-label {
    font-family: 'Galmuri11', monospace;
    @apply block text-sm font-bold;
    color: var(--foreground);
    margin-bottom: 0.25rem;
  }

  /* 픽셀 탭 버튼 */
  .pixel-tab {
    font-family: 'Galmuri11', monospace;
    @apply px-5 py-2 font-bold text-sm whitespace-nowrap;
    background: var(--pixel-bg-card);
    color: var(--foreground);
    border: 3px solid var(--pixel-border-muted);
    box-shadow: var(--shadow-md);
    transition: all 0.1s ease;
    cursor: pointer;
  }
  .pixel-tab:hover {
    border-color: var(--pixel-accent);
    transform: translate(1px, 1px);
    box-shadow: var(--shadow-sm);
  }
  .pixel-tab-active {
    background: var(--pixel-accent);
    color: white;
    border-color: var(--pixel-accent-dark);
    box-shadow: 3px 3px 0px var(--pixel-accent-dark);
  }
  .pixel-tab-active:hover {
    background: var(--pixel-accent-dark);
    transform: translate(1px, 1px);
    box-shadow: 2px 2px 0px var(--pixel-accent-dark);
  }

  /* 네비게이션 링크 */
  .pixel-nav-active {
    color: white;
    background: var(--pixel-accent);
    border: 2px solid var(--pixel-accent-dark);
    box-shadow: var(--shadow-sm);
  }
  .pixel-nav-inactive {
    color: var(--foreground);
    border: 2px solid transparent;
    transition: all 0.1s ease;
  }
  .pixel-nav-inactive:hover {
    background: rgba(0, 0, 0, 0.05);
    border-color: var(--pixel-border-muted);
  }
  .dark .pixel-nav-inactive:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  /* 모바일 네비게이션 링크 */
  .pixel-nav-mobile-active {
    background: rgba(239, 68, 68, 0.1);
    color: var(--pixel-accent);
    border-left: 3px solid var(--pixel-accent);
  }
  .pixel-nav-mobile-inactive {
    color: var(--foreground);
    transition: all 0.1s ease;
  }
  .pixel-nav-mobile-inactive:hover {
    background: rgba(239, 68, 68, 0.05);
  }

  /* 픽셀 칩/필터 활성 상태 (공통 패턴) */
  .pixel-chip-active {
    background: var(--pixel-accent);
    color: white;
    border-color: var(--pixel-accent-dark);
    box-shadow: 2px 2px 0px var(--pixel-accent-dark);
  }

  /* 픽셀 모달 */
  .pixel-modal-overlay {
    @apply fixed inset-0 flex items-center justify-center z-50 p-4;
    background: rgba(0, 0, 0, 0.7);
  }
  .pixel-modal {
    background: var(--pixel-bg-card);
    border: 3px solid var(--pixel-border);
    box-shadow: var(--shadow-xl);
    @apply w-full p-6;
    max-width: 28rem;
    animation: pixelModalIn 0.15s ease;
  }
  .pixel-modal-header {
    @apply flex items-center justify-between mb-6 pb-3;
    border-bottom: 2px solid var(--pixel-border-muted);
  }
  .pixel-modal-title {
    font-family: 'Galmuri11', monospace;
    @apply text-lg font-bold uppercase tracking-wide;
    color: var(--foreground);
  }
  .pixel-modal-close {
    @apply p-1;
    border: 2px solid var(--pixel-border-muted);
    box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.3);
    background: transparent;
    cursor: pointer;
    transition: all 0.1s ease;
  }
  .pixel-modal-close:hover {
    border-color: var(--pixel-accent);
    transform: translate(1px, 1px);
    box-shadow: 1px 1px 0px rgba(0, 0, 0, 0.3);
  }

  /* 픽셀 스탯 카드 (호버 효과 포함) */
  .pixel-stat-card {
    background: var(--pixel-bg-card);
    border: 3px solid var(--pixel-border-muted);
    box-shadow: var(--shadow-md);
    @apply p-4 transition-all;
    transition-duration: 0.1s;
  }
  .pixel-stat-card:hover {
    border-color: var(--pixel-accent);
    transform: translate(-1px, -1px);
    box-shadow: var(--shadow-lg);
  }

  /* 픽셀 빈 상태 카드 */
  .pixel-empty-state {
    @apply card-base text-center p-8;
  }
  @media (min-width: 640px) {
    .pixel-empty-state {
      @apply p-12;
    }
  }

  /* 수익률 색상 - 픽셀 폰트 + 굵게 */
  .return-positive {
    font-family: 'Galmuri11', monospace;
    font-weight: 900;
    color: #ef4444;
  }

  .return-negative {
    font-family: 'Galmuri11', monospace;
    font-weight: 900;
    color: #3b82f6;
  }

  .return-neutral {
    color: #888888;
  }

  /* 텍스트 스타일 */
  .text-heading {
    @apply font-bold tracking-wide;
    color: var(--foreground);
  }

  .text-subheading {
    @apply font-semibold;
    color: var(--foreground);
  }

  .text-muted {
    @apply text-gray-500 dark:text-gray-400;
  }

  /* 컨테이너 스타일 */
  .section-container {
    @apply max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12;
  }

  /* 스크롤 컨테이너 */
  .scroll-container {
    @apply overflow-x-auto pb-6 pt-1 snap-x snap-mandatory;
  }
}

/* 브랜드 타이틀 샤인 애니메이션 (layer 밖에 선언) */
@keyframes brandShine {
  0% { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}

@keyframes pixelModalIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
